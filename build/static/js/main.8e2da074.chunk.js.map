{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Persons","persons","deletePerson","map","person","name","number","onClick","id","PersonForm","addPersons","handleNames","newName","newPhoneNumber","handlePhoneNumber","onSubmit","onChange","value","type","Filter","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","success","Notification","message","includes","style","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setPhoneNumber","showFiltered","setShowFiltered","setMessage","useEffect","personsServices","initialPersons","filteredPersonsNames","filter","toLowerCase","search","event","target","preventDefault","nameObject","console","log","foundPerson","find","toLocaleLowerCase","undefined","window","confirm","changedNumber","returnedPerson","setTimeout","catch","concat","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8e2da074.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({ persons, deletePerson }) => {\r\n  return (\r\n          <ul>\r\n      {\r\n        persons.map(person => person !== null ? \r\n          <li key={person.id}>{person.name} {person.number} <button onClick={() => deletePerson(person.id) }>delete  </button></li>\r\n          : null\r\n        )\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({addPersons, handleNames, newName, newPhoneNumber, handlePhoneNumber }) => {\r\n    return (\r\n        <form onSubmit={addPersons}>\r\n        <div>\r\n          name: <input onChange={handleNames} value={newName}/>\r\n        </div>\r\n        <div>number: <input onChange={handlePhoneNumber} value={newPhoneNumber}/></div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Filter = ( { onChange, value } ) => \r\n        <div>filter shown with: <input onChange={onChange} value={value}/></div>\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst error = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  const success = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  \r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    else if (message.includes(\"Success\")) {\r\n        return (\r\n            <div style={success}>\r\n              {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div style={error}>\r\n          {message}\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\n  const getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const destroy = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n  }\r\n\r\n  \r\n  export default {getAll, create, update,destroy}\r\n  /*\r\n  export default { \r\n    getAll: getAll, \r\n    create: create, \r\n    update: update \r\n  }\r\n  */","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personsServices from './services/persons'\n// import { set } from 'mongoose'\n\nconst App = () => {\n\n  /* App State */\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newPhoneNumber, setPhoneNumber] = useState('')\n  const [showFiltered, setShowFiltered] = useState('')\n  const [message, setMessage] = useState(null)\n\n  /*Use effect*/ \n  useEffect(() => {\n    personsServices\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n\n  /* Event Handlers */\n  const addPersons = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newPhoneNumber\n    }\n    \n    console.log(\"persons\", typeof persons, persons);\n    console.log(\"newName\", typeof newName, newName);\n\n    let foundPerson = persons.find(person => person.name.toLowerCase() === newName.toLocaleLowerCase())\n\n    if (foundPerson !== undefined) {\n      if(window.confirm(`${foundPerson.name} is already added to phonebook, replace the old number with a new one?`)) {\n        const changedNumber = {...foundPerson, number: newPhoneNumber}\n          personsServices\n          .update(foundPerson.id, changedNumber)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== foundPerson.id ? person : returnedPerson))\n            setMessage(`Success. Changed ${returnedPerson.name} phone number.`)\n            setNewName('')\n            setPhoneNumber('')\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            if (error.response !== undefined) {\n              if (error.response.data.error.includes('Validation')) {\n                  setMessage(error.response.data.error)\n                  setTimeout(() => {\n                    setMessage(null)\n                  }, 5000)\n                }\n              }\n\n            else {\n              setMessage(\n                `Person '${foundPerson.name}' was already removed from server, cannot update!`\n              )\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n            }\n            \n          })\n      }\n    }\n\n    else {\n      personsServices\n        .create(nameObject)\n        .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setPhoneNumber('')\n        setMessage(`Success. Added ${returnedPerson.name}.`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n         })\n        .catch(error => {\n          setMessage(error.response.data.error)\n          console.log(error.response.data, \"|| ERROR RESPONSE DATA\");\n        })  \n    }\n  }\n\n  const deletePerson = (id) => {\n    const personName = persons.find(person => person.id === id)\n    if(window.confirm(`Delete ${personName.name}?`)) {\n      personsServices\n        .destroy(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          setMessage(\n            `Person '${personName.name}' was removed from server.`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n          .catch(() => {\n            setPersons(persons.filter(person => person.id !== id))\n            setMessage(\n              `Person '${personName.name}' was already removed from server, cannot delete!`, 'error'\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n        }\n      }\n\n\n  const handleNames = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handlePhoneNumber = (event) => {\n    setPhoneNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setShowFiltered(event.target.value)\n  }\n\n  // const filteredPersonsNames = showFiltered.length === 0 ?\n  //   persons : \n  //   persons.filter(p => p.name.toLowerCase().indexOf(showFiltered.toLowerCase()) > 0 )\n\n   const filteredPersonsNames = showFiltered \n ? persons.filter(person => person.name.toLowerCase().search(showFiltered.toLowerCase()) !== -1) \n  : persons\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter onChange={handleFilter} value={showFiltered} />\n      <h2>add a new</h2>\n      <PersonForm \n        addPersons={addPersons}\n        handleNames={handleNames}\n        newName={newName}\n        handlePhoneNumber={handlePhoneNumber}\n        newPhoneNumber={newPhoneNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersonsNames} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}