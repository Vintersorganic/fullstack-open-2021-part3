{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Persons","filteredPersonsNames","deletePerson","map","person","name","number","onClick","id","PersonForm","addPersons","handleNames","newName","newPhoneNumber","handlePhoneNumber","onSubmit","onChange","value","type","Filter","handleFilter","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","success","Notification","message","includes","style","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setPhoneNumber","showFiltered","setShowFiltered","setMessage","filter","toLowerCase","search","useEffect","personsServices","initialPersons","event","target","preventDefault","nameObject","console","log","foundPerson","find","toLocaleLowerCase","undefined","window","confirm","changedNumber","returnedPerson","setTimeout","catch","concat","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4ba7aa27.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({ filteredPersonsNames, deletePerson }) => {\r\n    return (\r\n            <ul>\r\n        {\r\n          filteredPersonsNames.map(person => person.name ? \r\n            <li key={person.id}>{person.name} {person.number} <button onClick={() => deletePerson(person.id) }>delete  </button></li>\r\n            : null\r\n          )\r\n        }\r\n      </ul>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({addPersons, handleNames, newName, newPhoneNumber, handlePhoneNumber }) => {\r\n    return (\r\n        <form onSubmit={addPersons}>\r\n        <div>\r\n          name: <input onChange={handleNames} value={newName}/>\r\n        </div>\r\n        <div>number: <input onChange={handlePhoneNumber} value={newPhoneNumber}/></div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Filter = ( { handleFilter } ) => \r\n        <div>filter shown with: <input onChange={handleFilter}/></div>\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst error = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  const success = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  \r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    else if (message.includes(\"Success\")) {\r\n        return (\r\n            <div style={success}>\r\n              {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div style={error}>\r\n          {message}\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\n  const getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const destroy = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n  }\r\n\r\n  \r\n  export default {getAll, create, update,destroy}\r\n  /*\r\n  export default { \r\n    getAll: getAll, \r\n    create: create, \r\n    update: update \r\n  }\r\n  */","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personsServices from './services/persons'\nimport { set } from 'mongoose'\n\nconst App = () => {\n\n  /* App State */\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newPhoneNumber, setPhoneNumber] = useState('')\n  const [showFiltered, setShowFiltered] = useState('')\n  const [message, setMessage] = useState(null)\n\n\n  const filteredPersonsNames = showFiltered \n  ? persons.filter(person => person.name.toLowerCase().search(showFiltered.toLowerCase()) !== -1) \n  : persons\n\n  /*Use effect*/ \n  useEffect(() => {\n    personsServices\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n\n  /* Event Handlers */\n  const addPersons = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newPhoneNumber\n    }\n    \n    console.log(\"persons\", typeof persons, persons);\n    console.log(\"newName\", typeof newName, newName);\n\n    let foundPerson = persons.find(person => person.name.toLowerCase() === newName.toLocaleLowerCase())\n\n    if (foundPerson !== undefined) {\n      if(window.confirm(`${foundPerson.name} is already added to phonebook, replace the old number with a new one?`)) {\n        const changedNumber = {...foundPerson, number: newPhoneNumber}\n          personsServices\n          .update(foundPerson.id, changedNumber)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== foundPerson.id ? person : returnedPerson))\n            setMessage(`Success. Changed ${returnedPerson.name} phone number.`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch((error) => {\n\n            if (error.response.data.error.includes('Validation')) {\n              setMessage(error.response.data.error)\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n            }\n\n\n            else {\n              console.log(error.response.data.error, \"||||||||| ERROR\");\n              setMessage(\n                `Person '${foundPerson.name}' was already removed from server, cannot update!`\n              )\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n            }\n            \n          })\n      }\n    }\n\n    else {\n      personsServices\n        .create(nameObject)\n        .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setPhoneNumber('')\n        setMessage(`Success. Added ${returnedPerson.name}.`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n         })\n        .catch(error => {\n          setMessage(error.response.data.error)\n          console.log(error.response.data, \"|| ERROR RESPONSE DATA\");\n        })  \n    }\n  }\n\n  const deletePerson = (id) => {\n    const personName = persons.find(person => person.id === id)\n    if(window.confirm(`Delete ${personName.name}?`)) {\n      personsServices\n        .destroy(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n        .catch((error) => {\n          setMessage(\n            `Person '${personName.name}' was already removed from server, cannot delete!`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n      }\n    }\n\n\n  const handleNames = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handlePhoneNumber = (event) => {\n    setPhoneNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setShowFiltered(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm \n        addPersons={addPersons}\n        handleNames={handleNames}\n        newName={newName}\n        handlePhoneNumber={handlePhoneNumber}\n        newPhoneNumber={newPhoneNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons filteredPersonsNames={filteredPersonsNames} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}